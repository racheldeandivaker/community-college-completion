---
title: "Top Five Certificates and Associate Degrees across FL Community Colleges"
author: "Rachel Dean Divaker"
date: "2025-10-14"
output: pdf_document
---
```{r setup, include=FALSE}



```


Install packages and load libraries
```{r setup, include=FALSE}
# install packages (commenting out after running)

# install.packages('educationdata')

# load libraries

library(dplyr)
library(educationdata)


```

Importing and cleaning data from directory and program completions using CIP_6 codes. 2022 appears to be the most recent year available. 

```{r}
# Import directory dataset
dir_data <- get_education_data(
  level = "college-university",
  source = "ipeds",
  topic = "directory",
  filters = list(year = 2022)
)



```

```{r}
# Import completions-cip-6 dataset

comp_data <- get_education_data(
  level = "college-university",
  source = "ipeds",
  topic = "completions-cip-6",
  filters = list(year = 2022)
)

```

Cleaning data:

```{r}
# directory

# Select and filter variables
clean_dir <- dir_data %>%
  select(unitid, year, opeid, fips, sector, inst_control, cc_basic_2021, inst_name) %>%
  filter(fips == 12, opeid != "-2", inst_control == 1, ((cc_basic_2021 >= 1 & cc_basic_2021 <= 8) | cc_basic_2021 == 14 | cc_basic_2021 == 23) & cc_basic_2021 > 0, !is.na(inst_name))
#keeps FL, public institutions, removes NAs from institutions

```

```{r}
#CIP

# Select and filter variables
#fips: 12 is Florida 
#award_level: 1, 2, 3, 30, 31, 32, 33 = certificates
#award_level: 4 = associate degrees
#awards_6digit: above 0 = completer
#cipcode_6digit: above 0 = specific program name, removing 99 (it appears to include all programs/ miscellaneous category)

clean_comp <- comp_data %>%
  select(unitid, sex, race, cipcode_6digit, award_level, awards_6digit, fips, year) %>%
  filter(fips == 12, sex == 99, race == 99, cipcode_6digit > 0, cipcode_6digit != 99, award_level %in% c(4, 32), awards_6digit > 0) 
```




Merging Directory and CIPcode and getting top five certificate and associate programs at each FL community college
```{r}
#merging dataframes

merged_data <- left_join(clean_dir, clean_comp, by = c("unitid", "year", "fips")) %>% 
  group_by(opeid, award_level) %>% 
  slice_max(order_by = awards_6digit, n = 5, with_ties = TRUE)
  
  




```


